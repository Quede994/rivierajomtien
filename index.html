<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Cylinder VR Test</title>
  <style>
    html, body { margin: 0; height: 100%; overflow: hidden; background: #000; }
    canvas { display: block; }
  </style>
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
  <script>
    const scene = new THREE.Scene();

    const camera = new THREE.PerspectiveCamera(
      75, window.innerWidth / window.innerHeight, 1, 1100
    );
    camera.position.set(0, 0, 0.1); // 내부에 위치

    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // ✅ CylinderGeometry (내부 보기용)
    const geometry = new THREE.CylinderGeometry(500, 500, 300, 64, 1, true);
    geometry.scale(-1, 1, 1); // 반전 중요

    // ✅ 외부 테스트 텍스처
    const texture = new THREE.TextureLoader().load('https://threejs.org/examples/textures/2294472375_24a3b8ef46_o.jpg');
    const material = new THREE.MeshBasicMaterial({
      map: texture,
      side: THREE.BackSide
    });

    const cylinder = new THREE.Mesh(geometry, material);
    scene.add(cylinder);

    // ✅ 수동 회전
    let isDragging = false;
    let prevX = 0;
    renderer.domElement.addEventListener('mousedown', (e) => {
      isDragging = true;
      prevX = e.clientX;
    });
    renderer.domElement.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      const deltaX = e.clientX - prevX;
      cylinder.rotation.y -= deltaX * 0.005;
      prevX = e.clientX;
    });
    renderer.domElement.addEventListener('mouseup', () => {
      isDragging = false;
    });

    function animate() {
      requestAnimationFrame(animate);
      renderer.render(scene, camera);
    }
    animate();
  </script>
</body>
</html>
